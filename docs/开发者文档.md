# å¼€å‘è€…æ–‡æ¡£

æœ¬æ–‡ä»¶é¢å‘äºŒæ¬¡å¼€å‘è€…ï¼Œæ¦‚è¿°å·¥ç¨‹ç»“æ„ä¸å…³é”®æ¨¡å—å¯¹æ¥ç‚¹ã€‚

## é¡¹ç›®ç»“æ„

ä¸ºé¿å…é‡å¤ï¼Œè¯·å‚é˜…ç»“æ„ä¸“ç”¨æ–‡æ¡£ï¼š[`docs/é¡¹ç›®ç»“æ„.md`](docs/é¡¹ç›®ç»“æ„.md)ã€‚

## æ¶æ„æ¦‚è§ˆ

- æ•°æ®æ¨¡å‹ï¼ˆ`relic/`ï¼‰ï¼š`RelicData`ã€`RelicSlot`ã€`RelicRarity`ã€`RelicStatType`
- å­˜å‚¨å±‚ï¼ˆ`storage/`ï¼‰ï¼š`RelicInventoryStorage`ã€`InventoryProfileManager` ç­‰
- ä¸šåŠ¡å±‚ï¼ˆ`service/`ï¼‰ï¼š`RelicEffectService`ã€`StatAggregationService`ã€`AttributePlusBridge`ã€`RelicGenerationService` ğŸ†•
- å±•ç¤ºå±‚ï¼ˆ`gui/`ï¼‰ï¼šä¸»èœå•ã€è£…å¤‡ã€ä»“åº“ GUI
- å‘½ä»¤å±‚ï¼ˆ`command/`ï¼‰ï¼š`/relic` å‘½ä»¤ï¼ˆå« help/list/gen/boxï¼‰ä¸ Tab è¡¥å…¨
- ç®¡ç†å±‚ï¼ˆ`manager/`ï¼‰ï¼š`RelicManager`ï¼ˆå¥—è£…+å±æ€§æ± ï¼‰ã€`TreasureBoxManager`ï¼ˆå®ç®±ï¼‰ğŸ†•

## å…³é”®å˜æ›´ï¼ˆv1.0.0+ï¼‰

- æ–°å¢å±æ€§æ± ä¸éšæœºç”Ÿæˆï¼šä¸»/å‰¯è¯æ¡æ¥æºã€æƒé‡ä¸ä¸»è¯æ¡æ­¥è¿›
- æ–°å¢å®ç®±ç³»ç»Ÿï¼šé…ç½®åŒ–å¤–è§‚ä¸æ‰è½æƒé‡ã€å³é”®å¼€å¯ç”Ÿæˆ
- `/relic list` æ”¯æŒä¸­æ–‡åå±•ç¤ºã€å››ä»¶å¥—é¢„è§ˆã€ç¿»é¡µ
- `/relic help` æ±‡æ€»å‘½ä»¤ï¼ŒTab è¡¥å…¨è¦†ç›– `box/give/gen` æµç¨‹

## å±æ€§æ± ä¸ç”Ÿæˆï¼ˆ`RelicGenerationService`ï¼‰

- é…ç½®æ–‡ä»¶ï¼š`relics/attribute_pool.yml`
  - `main_stats.*.base/step/slots`ï¼šä¸»è¯æ¡åŸºç¡€å€¼ã€æ¯çº§æ­¥è¿›å’Œéƒ¨ä½é™åˆ¶
  - `sub_stats.*.weight/pool`ï¼šå‰¯è¯æ¡æƒé‡ä¸(åˆå§‹/å¼ºåŒ–)æŠ½å–æ± 
  - `rarity.*`ï¼šä¸åŒå“è´¨çš„`max_level`ä¸åˆå§‹å‰¯è¯æ¡æ•°é‡èŒƒå›´
- ç”Ÿæˆè§„åˆ™ï¼š
  - ä¸»è¯æ¡ï¼šFLOWER=HP_FLATï¼ŒPLUME=ATK_FLATï¼Œå…¶ä½™æŒ‰ `slots` å€™é€‰éšæœº
  - ä¸»è¯æ¡éšç­‰çº§çº¿æ€§å¢é•¿å¯åœ¨ `config.yml -> relic.mainstat.scale` å¯ç”¨
  - å‰¯è¯æ¡ï¼šæŒ‰æƒé‡åŠ æƒéšæœºä¸”ä¸ä¸»/å·²æœ‰å‰¯è¯æ¡å»é‡ï¼›æ¯5çº§æ–°å¢æˆ–å¼ºåŒ–ï¼Œæœ€å¤š4æ¡

## å®ç®±ç³»ç»Ÿï¼ˆ`TreasureBoxManager`/`TreasureBoxListener`ï¼‰

- é…ç½®æ–‡ä»¶ï¼š`relics/treasure_box.yml`
  - `display_name/material/custom_model_data/glow` å¤–è§‚
  - `sets/rarities` å€™é€‰é›†åˆä¸ `set_weights/rarity_weights` æƒé‡
- äº¤äº’ï¼š
  - `TreasureBoxItemFactory` å°† `boxId` å†™å…¥ PDCï¼›å³é”®å¼€å¯è§¦å‘ç”Ÿæˆå¹¶æ¶ˆè€—
  - å‘½ä»¤å‘æ”¾ï¼š`/relic box give <player> <boxId> [amount]`

## å‘½ä»¤ä¸è¡¥å…¨

- é¡¶å±‚ï¼š`help`ã€`list [page]`ã€`open`ã€`gen`ã€`box`ã€`reload`...
- `gen`: setId â†’ slot â†’ rarity â†’ level çš„å¤šå±‚è¡¥å…¨
- `box give`: player â†’ boxId â†’ amount çš„å¤šå±‚è¡¥å…¨
- `list`: æ”¯æŒé¡µç è¡¥å…¨ï¼ˆ1/2/3...ï¼‰ï¼Œæ¯é¡µ6æ¡

## é›†æˆï¼ˆAttributePlusBridgeï¼‰

- `config.yml -> integration.attributeplus`ï¼šå¼€å¯ã€å‘½åç©ºé—´ã€æ˜ å°„è¡¨
- è¿è¡ŒæœŸé€šè¿‡ `AttributePlusBridge.apply/clear` å¯¹æ¥ï¼ˆå½“å‰ä¸ºå ä½æ—¥å¿—ï¼‰

## æ„å»ºä¸è°ƒè¯•

- æ¨èæ ¹ç›®å½•æ‰§è¡Œ `build_jar.bat`ï¼ˆMavenåŒ…è£…ï¼‰
- ç›®æ ‡ JARï¼š`target/relic-system-1.0.0.jar`
- Paper 1.20.xï¼ŒJava 17+
